<form action="{% url 'wayrem_admin:supplier_product_po' %}" method="post">
  {% csrf_token %}
  <input type="hidden" class="form-control" name="supplier" value="{{supplier}}" id="product_name">
<table class="table">
    <thead>
      <tr>
        <th> </th>
        <th scope="col" class = "text-center">SKU</th>
        <th scope="col" class = "text-center">Products</th>
        <th scope="col" class = "text-center">Price</th>
        <th scope="col" class = "text-center">Deliverable Time</th>
        <th scope="col" class = "text-center">Lowest Quoted Price</th>
        <th scope="col" class = "text-center">Lowest Deliverable Time</th>


        
      </tr>
    </thead>
    <tbody>
    {% for i,j in list %}
      <tr>
        <td>
          <input class="form-check-input" type="checkbox" value="{{i.id}}" name="prod{{forloop.counter}}" id="product_id" checked>
        </td>
        <td class = "text-center">{{ i.SKU }}</td>
        <td class = "text-center">{{i.product_name}}</td>
        <td class = "text-center">{{i.price}}</td>
        <td class = "text-center">Within {{i.deliverable_days}} days</td>
         <td class = "text-center">
           <a type="button" class="btn btn-sm"  onclick="supplierprodFunc('{{j.supplier_id}}' , '{{i.supplier_id.id}}')" {% if i.price == j.lowest_price %}
           title="This supplier is providing this product in lowest price">
           {% else %}
          title="Lowest quoted price for this product is '{{j.lowest_price}}' click to view supplier">
          {% endif %}
          <b> {{j.lowest_price}}</b>
          </a>
          </td>
     <td class = "text-center">Within {{j.lowest_delivery_time}} days</td>  
      </tr> 
      {% endfor %}
    </tbody>
  </table>
  <div class="text-center mt-2">
  <button type="submit" class="btn btn-primary">Raise PO</button>
</div>
</form>
<script>
  function supplierprodFunc(id,oldid){
    console.log(oldid);
      const url="{% url 'wayrem_admin:allproductsupplier' %}";
      $.ajax({
          
          url:url,
          data: {
                      'supplierid': id       // add the country id to the GET parameters
                  },
          success:function(data){
              console.log(data)
          $("#test"+id).html(data);
          
          $("#supplier"+id).modal('show');
          $('#supplier'+oldid).modal('hide');
          
          },
      });
  
      }
      $(document).ready(function(){
      
          $('#supplier').modal('hide');
      
      });
  </script>
                                  
  
  
  